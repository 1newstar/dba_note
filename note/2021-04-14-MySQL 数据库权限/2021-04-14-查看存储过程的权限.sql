
read_userss@mysqldb 17:36:  [test_db]> select version();
+------------+
| version()  |
+------------+
| 5.7.22-log |
+------------+
1 row in set (0.00 sec)

create user 'read_userss'@'%' identified by '123456';
grant select test_db.* to 'read_userss'@'%' with grant option;


show grants for 'read_userss'@'%';

show create procedure `test_db`.`idata`;

root@mysqldb 17:32:  [(none)]> show grants for 'read_userss'@'%';
+--------------------------------------------------------------------+
| Grants for read_userss@%                                           |
+--------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'read_userss'@'%'                            |
| GRANT SELECT ON `test_db`.* TO 'read_userss'@'%' WITH GRANT OPTION |
+--------------------------------------------------------------------+
2 rows in set (0.00 sec)





mysql -h 192.168.0.242 -uread_userss -p123456


使用root@localhost账号查看存储过程
	mysql> use test_db;
	Database changed
	root@mysqldb 17:33:  [test_db]> show create procedure `test_db`.`idata`;
	+-----------+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
	| Procedure | sql_mode                                   | Create Procedure                                                                                                                                                                                                                                      | character_set_client | collation_connection | Database Collation |
	+-----------+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
	| idata     | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | CREATE DEFINER=`root`@`%` PROCEDURE `idata`()
	begin
	  declare i int;
	  set i=1;
	  while(i<=10000)do
		insert into t_20210330(name, age, ismale) values(substring(md5(rand()),1,10), i, FLOOR(1 + (RAND() * 100)));
		set i=i+1;
	  end while;
	end | utf8                 | utf8_general_ci      | utf8mb4_general_ci |
	+-----------+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
	1 row in set (0.00 sec)




read_userss@mysqldb 17:37:  [test_db]> show create procedure `test_db`.`idata`;
ERROR 1305 (42000): PROCEDURE idata does not exist
read_userss@mysqldb 17:37:  [test_db]> 



--------------------------------------------------------------------
grant select on mysql.proc to 'read_userss'@'%';


root@mysqldb 17:39:  [(none)]> show grants for 'read_userss'@'%';
+--------------------------------------------------------------------+
| Grants for read_userss@%                                           |
+--------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'read_userss'@'%'                            |
| GRANT SELECT ON `test_db`.* TO 'read_userss'@'%' WITH GRANT OPTION |
| GRANT SELECT ON `mysql`.`proc` TO 'read_userss'@'%'                |
+--------------------------------------------------------------------+
3 rows in set (0.00 sec)


read_userss@mysqldb 17:39:  [test_db]> show create procedure `test_db`.`idata`;
+-----------+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Procedure | sql_mode                                   | Create Procedure                                                                                                                                                                                                                                      | character_set_client | collation_connection | Database Collation |
+-----------+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| idata     | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | CREATE DEFINER=`root`@`%` PROCEDURE `idata`()
begin
  declare i int;
  set i=1;
  while(i<=10000)do
	insert into t_20210330(name, age, ismale) values(substring(md5(rand()),1,10), i, FLOOR(1 + (RAND() * 100)));
	set i=i+1;
  end while;
end | utf8                 | utf8_general_ci      | utf8mb4_general_ci |
+-----------+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
1 row in set (0.00 sec)













